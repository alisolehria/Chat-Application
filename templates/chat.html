{% extends "bootstrap/base.html" %}

<!DOCTYPE html>
<html>
	<head>
			<meta charset="utf-8">
		    <meta http-equiv="X-UA-Compatible" content="IE=edge">
		    <meta name="viewport" content="width=device-width, initial-scale=1">
		    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		    <!--
			 ╭────────────────────────────────────────────────────────────────────────────╮
			 │                   ____________________________________                     |
			 │                 < Hello!								  >                   |
			 │                   ------------------------------------                     |
			 │                       \   ^__^                                             |
			 │                        \  (oo)\_______                                     |
			 │                           (__)\       )\/\                                 |
			 │                               ||----w |                                    |
			 │                               ||     ||                                    |
			 │                                                                            |
			 ╰────────────────────────────────────────────────────────────────────────────╯
 			-->
		    <meta name="description" content="First page for chat app">
			<meta name="author" content="Created by EJ">
		<title>Not Discord</title>
		{% block styles %}
{{super()}}
	<link rel="stylesheet" href="{{url_for('static',filename='css/bootstrap.min.css') }}">
		<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/index.css') }}">
		{% endblock %}


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src='https://code.jquery.com/jquery-2.2.4.min.js'></script>


	</head>
	<body>
		{% block content %}
                <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
        <script src='https://code.jquery.com/jquery-2.2.4.min.js'></script>
		 <div class="wrapper">
            <!-- Sidebar Holder -->
            <nav id="sidebar">
                <div class="sidebar-header">
                    <img src="{{ user.avatar(128) }}">
                    <br>
                    <h5 class="text-center current-user">{{ name }}</h5>
                </div>
                <ul class="list-unstyled components">

                    <li>     <div class="container">
                            <form id="myfriends" >
                         <i class="glyphicon glyphicon-briefcase"></i>
                             <button type = "submit" class = "btn btn-link"> Friends</button>
                        </form>
                         </div>
                    </li>
                     <li>     <div class="container">
                            <form id="mygroups" >
                         <i class="glyphicon glyphicon-briefcase"></i>
                             <button type = "submit" class = "btn btn-link"> Groups</button>
                        </form>
                         </div>
                    </li>
                    <li>
                        <div class="container">
                        <form id="friends" >
                            <i class="glyphicon glyphicon-briefcase"></i>
                            <button type = "submit" class = "btn btn-link"> Add Friends</button>
                        </form>
                            </div>
                    </li>
                          <li>
                       <div class="container">
                        <form id="groups" >
                            <i class="glyphicon glyphicon-briefcase"></i>
                            <button type = "submit" class = "btn btn-link">Browser Groups</button>
                        </form>
                            </div>
                    </li>
                </ul>
                <a type="button" class="btn btn-success logout" href="{{url_for('logout')}}">Log out</a>
            </nav>

            <!-- Page Content Holder -->
            <div class="container no-gutters">
            	<div class="row">
            		<!--List of chat, this section already has auto scroll bar -->
            		<div class="col-lg-3 chat-list">
            			<div class="chat-bar">
            				 <input class="form-control chat-search" type="search" placeholder="Search" aria-label="Search">

            			</div>

            			<ul class="nav nav-tabs list-group " id="nav-tab" role="tablist">
                             <div id = "mainHolder">

</div>
						</ul>

            		</div>
            		<!--Actual chat, bubbles etc.-->
            		<div id="mainChat" class="col-lg-9 chat">

            		</div>
            	</div>
            </div>
      </div>




     <script>

	$(function(){
	$('#friends').submit(function(){
		$.ajax({
			url: '/getUsers',
			data: "{{name}}",
			type: 'POST',
			success: function(response){
          		$("#mainHolder").html(response);

			},
			error: function(error){
				console.log(error);
			}
		});
		return false;
	});
});



 </script>
<script>

    function chatOpen(id){
        $.ajax({
			url: '/chatBox',
			data: {"id":id},
			type: 'POST',
			success: function(response){
          		$("#mainChat").html(response);

			},
			error: function(error){
				console.log(error);
			}
		});
    }
</script>

<script>

	$(function(){
	$('#groups').submit(function(){
		$.ajax({
			url: '/browseGroups',
			type: 'POST',
			success: function(response){
          		$("#mainHolder").html(response);
			},
			error: function(error){
				console.log(error);
			}
		});
		return false;
	});
});

</script>


        <script>

	$(function(){
	$('#mygroups').submit(function(){
		$.ajax({
			url: '/myGroups',
			type: 'POST',
			success: function(response){
          		$("#mainHolder").html(response);
			},
			error: function(error){
				console.log(error);
			}
		});
		return false;
	});
});

</script>

        <script>

    function groupOpen(id){
        $.ajax({
			url: '/groupChat',
			data: {"id":id},
			type: 'POST',
			success: function(response){
                      console.log("Here");
          		$("#mainChat").html(response);

			},
			error: function(error){

				console.log(error);
			}
		});
    }
</script>
<script>

//socketio script
        var socket = io.connect('http://' + document.domain + ':' + location.port);
    socket.on('connect', function() {
        socket.emit('connect_message', {data: 'I\'m connected!'});
        socket.removeAllListeners();
    });


</script>

<script>
 //clearInterval(interval);

    window.onload = function()
    {
       $.ajax({
			url: '/friendList',
			type: 'POST',
			success: function(response){
                $("#mainHolder").html(response);

			},
			error: function(error){

				console.log(error);
			}
		});
    }//time in milliseconds



</script>




{% endblock %}
	</body>


</html>
